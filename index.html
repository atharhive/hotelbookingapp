<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StayEase - Hotel Booking Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white">
    <!-- Navbar -->
    <header class="sticky top-0 z-50 bg-white dark:bg-gray-800 shadow-md">
        <nav class="container mx-auto px-4 py-3">
            <div class="flex items-center justify-between">
                <!-- Logo -->
                <div class="flex items-center space-x-2">
                    <div class="w-8 h-8 bg-primary-500 rounded-lg flex items-center justify-center">
                        <i data-lucide="hotel" class="w-5 h-5 text-white"></i>
                    </div>
                    <span class="text-xl font-bold text-primary-600 dark:text-primary-400">StayEase</span>
                </div>

                <!-- Desktop Navigation -->
                <div class="hidden md:flex items-center space-x-8">
                    <a href="#" onclick="showHome()" class="text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors">Home</a>
                    <a href="#" onclick="showHome()" class="text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors">Hotels</a>
                    <a href="#" class="text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors" onclick="showBookings()">My Bookings</a>
                    <a href="#" class="text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors">Contact</a>
                </div>

                <!-- Auth Buttons & Dark Mode Toggle -->
                <div class="hidden md:flex items-center space-x-4">
                    <button id="darkModeToggle" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                        <i data-lucide="moon" class="w-5 h-5 dark:hidden"></i>
                        <i data-lucide="sun" class="w-5 h-5 hidden dark:block"></i>
                    </button>
                    <div id="authButtons">
                        <button onclick="showAuthModal('login')" class="px-4 py-2 text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-lg transition-colors">Login</button>
                        <button onclick="showAuthModal('register')" class="px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors">Sign Up</button>
                    </div>
                    <div id="userMenu" class="hidden">
                        <div class="relative">
                            <button onclick="toggleUserDropdown()" class="flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                                <div class="w-8 h-8 bg-primary-500 rounded-full flex items-center justify-center">
                                    <i data-lucide="user" class="w-4 h-4 text-white"></i>
                                </div>
                                <span id="userName" class="text-sm font-medium"></span>
                            </button>
                            <div id="userDropdown" class="hidden absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border dark:border-gray-700">
                                <a href="#" onclick="showBookings()" class="block px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700">My Bookings</a>
                                <a href="#" onclick="logout()" class="block px-4 py-2 text-sm text-red-600 hover:bg-gray-100 dark:hover:bg-gray-700">Logout</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mobile Menu Button -->
                <button id="mobileMenuToggle" class="md:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                    <i data-lucide="menu" class="w-6 h-6"></i>
                </button>
            </div>

            <!-- Mobile Menu -->
            <div id="mobileMenu" class="hidden md:hidden mt-4 pb-4 border-t dark:border-gray-700">
                <div class="flex flex-col space-y-4 pt-4">
                    <a href="#" onclick="showHome()" class="text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400">Home</a>
                    <a href="#" onclick="showHome()" class="text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400">Hotels</a>
                    <a href="#" onclick="showBookings()" class="text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400">My Bookings</a>
                    <a href="#" class="text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400">Contact</a>
                    <div id="mobileAuthButtons" class="flex items-center space-x-4 pt-4 border-t dark:border-gray-700">
                        <button onclick="showAuthModal('login')" class="px-4 py-2 text-primary-600 dark:text-primary-400 border border-primary-600 dark:border-primary-400 rounded-lg">Login</button>
                        <button onclick="showAuthModal('register')" class="px-4 py-2 bg-primary-600 text-white rounded-lg">Sign Up</button>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Hero Section with Search -->
    <section id="heroSection" class="relative bg-gradient-to-r from-primary-600 to-primary-700 dark:from-primary-700 dark:to-primary-800 py-16">
        <div class="absolute inset-0 bg-black/20"></div>
        <div class="relative container mx-auto px-4">
            <div class="text-center mb-8">
                <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">Find Your Perfect Stay</h1>
                <p class="text-xl text-white/90">Discover amazing hotels at unbeatable prices</p>
            </div>

            <!-- Search Bar -->
            <div class="max-w-6xl mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6">
                <form id="searchForm" class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <!-- Location -->
                    <div class="relative">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Location</label>
                        <div class="relative">
                            <i data-lucide="map-pin" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"></i>
                            <input type="text" id="location" placeholder="Where are you going?" class="w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:text-white">
                        </div>
                    </div>

                    <!-- Check-in Date -->
                    <div class="relative">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Check-in</label>
                        <div class="relative">
                            <i data-lucide="calendar" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"></i>
                            <input type="date" id="checkin" class="w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:text-white">
                        </div>
                    </div>

                    <!-- Check-out Date -->
                    <div class="relative">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Check-out</label>
                        <div class="relative">
                            <i data-lucide="calendar" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"></i>
                            <input type="date" id="checkout" class="w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:text-white">
                        </div>
                    </div>

                    <!-- Guests -->
                    <div class="relative">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Guests</label>
                        <div class="relative">
                            <i data-lucide="users" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"></i>
                            <select id="guests" class="w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:text-white appearance-none">
                                <option value="1">1 Adult</option>
                                <option value="2">2 Adults</option>
                                <option value="3">3 Adults</option>
                                <option value="4">4 Adults</option>
                                <option value="5">5+ Adults</option>
                            </select>
                        </div>
                    </div>
                </form>

                <!-- Search Button -->
                <div class="mt-6 text-center">
                    <button onclick="searchHotels()" class="w-full md:w-auto px-8 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors font-semibold text-lg">
                        <i data-lucide="search" class="inline w-5 h-5 mr-2"></i>
                        Search Hotels
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main id="mainContent" class="container mx-auto px-4 py-8">
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Filters Sidebar -->
            <aside class="lg:w-80 flex-shrink-0">
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 sticky top-24">
                    <h3 class="text-lg font-semibold mb-6 flex items-center">
                        <i data-lucide="filter" class="w-5 h-5 mr-2"></i>
                        Filters
                    </h3>

                    <!-- Price Range -->
                    <div class="mb-6">
                        <h4 class="font-medium mb-3">Price Range (per night)</h4>
                        <div class="space-y-3">
                            <input type="range" id="priceRange" min="0" max="1000" value="500" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700" oninput="updatePriceValue()">
                            <div class="flex justify-between text-sm text-gray-600 dark:text-gray-400">
                                <span>$0</span>
                                <span id="priceValue">$500</span>
                                <span>$1000+</span>
                            </div>
                        </div>
                    </div>

                    <!-- Star Rating -->
                    <div class="mb-6">
                        <h4 class="font-medium mb-3">Star Rating</h4>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="checkbox" name="rating" value="5" onchange="applyFilters()" class="rounded border-gray-300 text-primary-600 focus:ring-primary-500">
                                <span class="ml-2 flex items-center">
                                    <div class="flex text-yellow-400">
                                        <i data-lucide="star" class="w-4 h-4 fill-current"></i>
                                        <i data-lucide="star" class="w-4 h-4 fill-current"></i>
                                        <i data-lucide="star" class="w-4 h-4 fill-current"></i>
                                        <i data-lucide="star" class="w-4 h-4 fill-current"></i>
                                        <i data-lucide="star" class="w-4 h-4 fill-current"></i>
                                    </div>
                                    <span class="ml-2 text-sm">5 Stars</span>
                                </span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="rating" value="4" onchange="applyFilters()" class="rounded border-gray-300 text-primary-600 focus:ring-primary-500">
                                <span class="ml-2 flex items-center">
                                    <div class="flex text-yellow-400">
                                        <i data-lucide="star" class="w-4 h-4 fill-current"></i>
                                        <i data-lucide="star" class="w-4 h-4 fill-current"></i>
                                        <i data-lucide="star" class="w-4 h-4 fill-current"></i>
                                        <i data-lucide="star" class="w-4 h-4 fill-current"></i>
                                        <i data-lucide="star" class="w-4 h-4"></i>
                                    </div>
                                    <span class="ml-2 text-sm">4+ Stars</span>
                                </span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="rating" value="3" onchange="applyFilters()" class="rounded border-gray-300 text-primary-600 focus:ring-primary-500">
                                <span class="ml-2 flex items-center">
                                    <div class="flex text-yellow-400">
                                        <i data-lucide="star" class="w-4 h-4 fill-current"></i>
                                        <i data-lucide="star" class="w-4 h-4 fill-current"></i>
                                        <i data-lucide="star" class="w-4 h-4 fill-current"></i>
                                        <i data-lucide="star" class="w-4 h-4"></i>
                                        <i data-lucide="star" class="w-4 h-4"></i>
                                    </div>
                                    <span class="ml-2 text-sm">3+ Stars</span>
                                </span>
                            </label>
                        </div>
                    </div>

                    <!-- Room Type -->
                    <div class="mb-6">
                        <h4 class="font-medium mb-3">Room Type</h4>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="checkbox" name="roomType" value="single" onchange="applyFilters()" class="rounded border-gray-300 text-primary-600 focus:ring-primary-500">
                                <span class="ml-2 text-sm">Single Room</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="roomType" value="double" onchange="applyFilters()" class="rounded border-gray-300 text-primary-600 focus:ring-primary-500">
                                <span class="ml-2 text-sm">Double Room</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="roomType" value="deluxe" onchange="applyFilters()" class="rounded border-gray-300 text-primary-600 focus:ring-primary-500">
                                <span class="ml-2 text-sm">Deluxe Room</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="roomType" value="suite" onchange="applyFilters()" class="rounded border-gray-300 text-primary-600 focus:ring-primary-500">
                                <span class="ml-2 text-sm">Suite</span>
                            </label>
                        </div>
                    </div>

                    <!-- Amenities -->
                    <div class="mb-6">
                        <h4 class="font-medium mb-3">Amenities</h4>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="checkbox" name="amenities" value="WiFi" onchange="applyFilters()" class="rounded border-gray-300 text-primary-600 focus:ring-primary-500">
                                <span class="ml-2 text-sm">Free WiFi</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="amenities" value="Pool" onchange="applyFilters()" class="rounded border-gray-300 text-primary-600 focus:ring-primary-500">
                                <span class="ml-2 text-sm">Swimming Pool</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="amenities" value="AC" onchange="applyFilters()" class="rounded border-gray-300 text-primary-600 focus:ring-primary-500">
                                <span class="ml-2 text-sm">Air Conditioning</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="amenities" value="Gym" onchange="applyFilters()" class="rounded border-gray-300 text-primary-600 focus:ring-primary-500">
                                <span class="ml-2 text-sm">Fitness Center</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="amenities" value="Spa" onchange="applyFilters()" class="rounded border-gray-300 text-primary-600 focus:ring-primary-500">
                                <span class="ml-2 text-sm">Spa</span>
                            </label>
                        </div>
                    </div>

                    <!-- Clear Filters -->
                    <button onclick="clearFilters()" class="w-full py-2 text-primary-600 dark:text-primary-400 border border-primary-600 dark:border-primary-400 rounded-lg hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-colors">
                        Clear All Filters
                    </button>
                </div>
            </aside>

            <!-- Hotel Listings -->
            <section class="flex-1">
                <!-- Results Header -->
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                    <div>
                        <h2 id="resultsTitle" class="text-2xl font-bold mb-2">Available Hotels</h2>
                        <p id="resultsCount" class="text-gray-600 dark:text-gray-400">Loading hotels...</p>
                    </div>
                    <div class="mt-4 sm:mt-0">
                        <select id="sortBy" onchange="applyFilters()" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-white">
                            <option value="recommended">Sort by: Recommended</option>
                            <option value="price_low">Price: Low to High</option>
                            <option value="price_high">Price: High to Low</option>
                            <option value="rating">Star Rating</option>
                        </select>
                    </div>
                </div>

                <!-- Hotel Cards Grid -->
                <div id="hotelGrid" class="grid grid-cols-1 xl:grid-cols-2 gap-6 mb-8">
                    <!-- Hotels will be loaded here -->
                </div>

                <!-- Loading Spinner -->
                <div id="loadingSpinner" class="text-center py-8">
                    <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"></div>
                    <p class="mt-2 text-gray-600 dark:text-gray-400">Loading hotels...</p>
                </div>

                <!-- No Results -->
                <div id="noResults" class="text-center py-12 hidden">
                    <i data-lucide="search-x" class="w-16 h-16 mx-auto text-gray-400 mb-4"></i>
                    <h3 class="text-xl font-semibold text-gray-600 dark:text-gray-400 mb-2">No hotels found</h3>
                    <p class="text-gray-500 dark:text-gray-500">Try adjusting your search criteria or filters</p>
                </div>
            </section>
        </div>
    </main>

    <!-- Bookings View -->
    <div id="bookingsView" class="hidden">
        <div class="container mx-auto px-4 py-8">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">My Bookings</h2>
                <button onclick="hideBookings()" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors">
                    Back to Hotels
                </button>
            </div>
            <div id="bookingsList" class="space-y-4">
                <!-- Bookings will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="authModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 id="authModalTitle" class="text-2xl font-bold">Login</h2>
                    <button onclick="hideAuthModal()" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                        <i data-lucide="x" class="w-6 h-6"></i>
                    </button>
                </div>

                <form id="authForm">
                    <div id="nameField" class="mb-4 hidden">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Full Name</label>
                        <input type="text" id="name" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:text-white" placeholder="Enter your full name">
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Email Address</label>
                        <input type="email" id="email" required class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:text-white" placeholder="Enter your email">
                    </div>

                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Password</label>
                        <input type="password" id="password" required class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:text-white" placeholder="Enter your password">
                    </div>

                    <button type="submit" class="w-full bg-primary-600 text-white py-3 rounded-lg hover:bg-primary-700 transition-colors font-semibold">
                        <span id="authSubmitText">Login</span>
                    </button>
                </form>

                <div class="mt-4 text-center">
                    <p class="text-sm text-gray-600 dark:text-gray-400">
                        <span id="authSwitchText">Don't have an account?</span>
                        <button id="authSwitchBtn" onclick="switchAuthMode()" class="text-primary-600 dark:text-primary-400 hover:underline font-medium">Sign up</button>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Booking Modal -->
    <div id="bookingModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">Book Your Stay</h2>
                    <button onclick="hideBookingModal()" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                        <i data-lucide="x" class="w-6 h-6"></i>
                    </button>
                </div>

                <div id="bookingContent">
                    <!-- Booking form will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Success/Error Messages -->
    <div id="messageContainer" class="fixed top-4 right-4 z-50 space-y-2"></div>

    <script>
        // Global variables
        const API_URL = window.location.origin;
        let currentUser = null;
        let authToken = localStorage.getItem('authToken');
        let allHotels = [];
        let allRooms = [];
        let currentView = 'home';

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            lucide.createIcons();
            setupEventListeners();
            
            if (authToken) {
                // Validate token and get user info
                fetch(`${API_URL}/api/auth/me`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        currentUser = data.data.user;
                        updateAuthUI();
                    } else {
                        localStorage.removeItem('authToken');
                        authToken = null;
                    }
                })
                .catch(error => {
                    localStorage.removeItem('authToken');
                    authToken = null;
                });
            }
            
            loadHotels();
            setDefaultDates();
        }

        function setupEventListeners() {
            // Dark mode toggle
            document.getElementById('darkModeToggle').addEventListener('click', toggleDarkMode);
            
            // Mobile menu toggle
            document.getElementById('mobileMenuToggle').addEventListener('click', toggleMobileMenu);
            
            // Auth form
            document.getElementById('authForm').addEventListener('submit', handleAuth);
            
            // Price range slider
            document.getElementById('priceRange').addEventListener('input', updatePriceValue);
            
            // Search form
            document.getElementById('searchForm').addEventListener('submit', function(e) {
                e.preventDefault();
                searchHotels();
            });
        }

        function setDefaultDates() {
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            document.getElementById('checkin').value = today.toISOString().split('T')[0];
            document.getElementById('checkout').value = tomorrow.toISOString().split('T')[0];
        }

        // Auth functions
        function showAuthModal(mode) {
            const modal = document.getElementById('authModal');
            const title = document.getElementById('authModalTitle');
            const nameField = document.getElementById('nameField');
            const submitText = document.getElementById('authSubmitText');
            const switchText = document.getElementById('authSwitchText');
            const switchBtn = document.getElementById('authSwitchBtn');

            if (mode === 'register') {
                title.textContent = 'Sign Up';
                nameField.classList.remove('hidden');
                submitText.textContent = 'Sign Up';
                switchText.textContent = 'Already have an account?';
                switchBtn.textContent = 'Login';
                switchBtn.onclick = () => showAuthModal('login');
            } else {
                title.textContent = 'Login';
                nameField.classList.add('hidden');
                submitText.textContent = 'Login';
                switchText.textContent = "Don't have an account?";
                switchBtn.textContent = 'Sign up';
                switchBtn.onclick = () => showAuthModal('register');
            }

            modal.classList.remove('hidden');
            modal.dataset.mode = mode;
        }

        function hideAuthModal() {
            document.getElementById('authModal').classList.add('hidden');
            document.getElementById('authForm').reset();
        }

        function switchAuthMode() {
            const modal = document.getElementById('authModal');
            const currentMode = modal.dataset.mode;
            showAuthModal(currentMode === 'login' ? 'register' : 'login');
        }

        async function handleAuth(e) {
            e.preventDefault();
            
            const mode = document.getElementById('authModal').dataset.mode;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const name = document.getElementById('name').value;

            const endpoint = mode === 'register' ? '/api/auth/register' : '/api/auth/login';
            const payload = mode === 'register' 
                ? { name, email, password }
                : { email, password };

            try {
                const response = await fetch(`${API_URL}${endpoint}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const data = await response.json();

                if (data.success) {
                    authToken = data.data.token;
                    currentUser = data.data.user;
                    localStorage.setItem('authToken', authToken);
                    
                    updateAuthUI();
                    hideAuthModal();
                    showMessage('success', mode === 'register' ? 'Account created successfully!' : 'Logged in successfully!');
                } else {
                    showMessage('error', data.message || 'Authentication failed');
                }
            } catch (error) {
                showMessage('error', 'Connection error. Please try again.');
            }
        }

        function updateAuthUI() {
            const authButtons = document.getElementById('authButtons');
            const userMenu = document.getElementById('userMenu');
            const userName = document.getElementById('userName');
            const mobileAuthButtons = document.getElementById('mobileAuthButtons');

            if (currentUser) {
                authButtons.classList.add('hidden');
                userMenu.classList.remove('hidden');
                userName.textContent = currentUser.name;
                mobileAuthButtons.classList.add('hidden');
            } else {
                authButtons.classList.remove('hidden');
                userMenu.classList.add('hidden');
                mobileAuthButtons.classList.remove('hidden');
            }
        }

        function toggleUserDropdown() {
            const dropdown = document.getElementById('userDropdown');
            dropdown.classList.toggle('hidden');
        }

        function logout() {
            authToken = null;
            currentUser = null;
            localStorage.removeItem('authToken');
            updateAuthUI();
            showMessage('success', 'Logged out successfully');
            hideBookings();
        }

        // Hotel functions
        async function loadHotels() {
            try {
                showLoading(true);
                
                const [hotelsResponse, roomsResponse] = await Promise.all([
                    fetch(`${API_URL}/api/hotels`),
                    fetch(`${API_URL}/api/rooms`)
                ]);

                const hotelsData = await hotelsResponse.json();
                const roomsData = await roomsResponse.json();

                if (hotelsData.success && roomsData.success) {
                    allHotels = hotelsData.data.hotels;
                    allRooms = roomsData.data.rooms;
                    
                    // Associate rooms with hotels
                    allHotels.forEach(hotel => {
                        hotel.rooms = allRooms.filter(room => room.hotelId === hotel.id);
                    });
                    
                    displayHotels(allHotels);
                } else {
                    throw new Error('Failed to load hotels');
                }
            } catch (error) {
                showMessage('error', 'Failed to load hotels. Please try again.');
                showNoResults();
            } finally {
                showLoading(false);
            }
        }

        function displayHotels(hotels) {
            const grid = document.getElementById('hotelGrid');
            const resultsCount = document.getElementById('resultsCount');
            
            if (hotels.length === 0) {
                showNoResults();
                return;
            }

            hideNoResults();
            resultsCount.textContent = `Showing ${hotels.length} hotel${hotels.length !== 1 ? 's' : ''}`;

            grid.innerHTML = hotels.map(hotel => {
                const minPrice = hotel.rooms.length > 0 
                    ? Math.min(...hotel.rooms.map(room => parseFloat(room.pricePerNight)))
                    : 0;

                return `
                    <article class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden hover:shadow-xl hover:scale-[1.02] transition-all duration-300">
                        <div class="relative">
                            <div class="w-full h-48 bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center">
                                <i data-lucide="hotel" class="w-16 h-16 text-white opacity-80"></i>
                            </div>
                            <div class="absolute top-4 right-4 bg-black/50 text-white px-2 py-1 rounded-lg text-sm">
                                <i data-lucide="heart" class="w-4 h-4"></i>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="flex justify-between items-start mb-2">
                                <h3 class="text-xl font-semibold">${hotel.name}</h3>
                                <div class="flex text-yellow-400">
                                    ${Array.from({length: 5}, (_, i) => 
                                        `<i data-lucide="star" class="w-4 h-4 ${i < hotel.starRating ? 'fill-current' : ''}"></i>`
                                    ).join('')}
                                </div>
                            </div>
                            <p class="text-gray-600 dark:text-gray-400 mb-3 flex items-center">
                                <i data-lucide="map-pin" class="w-4 h-4 mr-1"></i>
                                ${hotel.location}
                            </p>
                            <p class="text-gray-600 dark:text-gray-400 mb-4 text-sm">${hotel.description}</p>
                            <div class="flex flex-wrap gap-2 mb-4">
                                ${hotel.amenities.slice(0, 3).map(amenity => 
                                    `<span class="px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 rounded-full text-xs">${amenity}</span>`
                                ).join('')}
                                ${hotel.amenities.length > 3 ? `<span class="px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-full text-xs">+${hotel.amenities.length - 3} more</span>` : ''}
                            </div>
                            <div class="flex items-center justify-between">
                                <div>
                                    <span class="text-2xl font-bold text-primary-600 dark:text-primary-400">$${minPrice || 'N/A'}</span>
                                    <span class="text-gray-600 dark:text-gray-400">/night</span>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="viewHotelDetails('${hotel.id}')" class="px-4 py-2 border border-primary-600 dark:border-primary-400 text-primary-600 dark:text-primary-400 rounded-lg hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-colors">
                                        View Details
                                    </button>
                                    ${hotel.rooms.length > 0 ? 
                                        `<button onclick="showBookingModal('${hotel.id}')" class="px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors">
                                            Book Now
                                        </button>` : 
                                        `<button disabled class="px-4 py-2 bg-gray-400 text-white rounded-lg cursor-not-allowed">
                                            No Rooms
                                        </button>`
                                    }
                                </div>
                            </div>
                        </div>
                    </article>
                `;
            }).join('');
            
            lucide.createIcons();
        }

        function searchHotels() {
            const location = document.getElementById('location').value.toLowerCase();
            const checkin = document.getElementById('checkin').value;
            const checkout = document.getElementById('checkout').value;
            const guests = parseInt(document.getElementById('guests').value);

            let filteredHotels = allHotels;

            if (location) {
                filteredHotels = filteredHotels.filter(hotel => 
                    hotel.name.toLowerCase().includes(location) ||
                    hotel.location.toLowerCase().includes(location) ||
                    hotel.description.toLowerCase().includes(location)
                );
            }

            if (guests) {
                filteredHotels = filteredHotels.filter(hotel => 
                    hotel.rooms.some(room => room.maxGuests >= guests)
                );
            }

            displayHotels(filteredHotels);
            
            if (location) {
                document.getElementById('resultsTitle').textContent = `Hotels in ${location}`;
            } else {
                document.getElementById('resultsTitle').textContent = 'Available Hotels';
            }
        }

        function applyFilters() {
            const maxPrice = parseInt(document.getElementById('priceRange').value);
            const selectedRatings = Array.from(document.querySelectorAll('input[name="rating"]:checked')).map(cb => parseInt(cb.value));
            const selectedRoomTypes = Array.from(document.querySelectorAll('input[name="roomType"]:checked')).map(cb => cb.value);
            const selectedAmenities = Array.from(document.querySelectorAll('input[name="amenities"]:checked')).map(cb => cb.value);
            const sortBy = document.getElementById('sortBy').value;

            let filteredHotels = allHotels.filter(hotel => {
                // Price filter
                const minPrice = hotel.rooms.length > 0 
                    ? Math.min(...hotel.rooms.map(room => parseFloat(room.pricePerNight)))
                    : 0;
                if (minPrice > maxPrice) return false;

                // Rating filter
                if (selectedRatings.length > 0 && !selectedRatings.includes(hotel.starRating)) return false;

                // Room type filter
                if (selectedRoomTypes.length > 0) {
                    const hasMatchingRoom = hotel.rooms.some(room => selectedRoomTypes.includes(room.roomType));
                    if (!hasMatchingRoom) return false;
                }

                // Amenities filter
                if (selectedAmenities.length > 0) {
                    const hasMatchingAmenity = selectedAmenities.some(amenity => hotel.amenities.includes(amenity));
                    if (!hasMatchingAmenity) return false;
                }

                return true;
            });

            // Sort hotels
            switch (sortBy) {
                case 'price_low':
                    filteredHotels.sort((a, b) => {
                        const priceA = a.rooms.length > 0 ? Math.min(...a.rooms.map(r => parseFloat(r.pricePerNight))) : 0;
                        const priceB = b.rooms.length > 0 ? Math.min(...b.rooms.map(r => parseFloat(r.pricePerNight))) : 0;
                        return priceA - priceB;
                    });
                    break;
                case 'price_high':
                    filteredHotels.sort((a, b) => {
                        const priceA = a.rooms.length > 0 ? Math.min(...a.rooms.map(r => parseFloat(r.pricePerNight))) : 0;
                        const priceB = b.rooms.length > 0 ? Math.min(...b.rooms.map(r => parseFloat(r.pricePerNight))) : 0;
                        return priceB - priceA;
                    });
                    break;
                case 'rating':
                    filteredHotels.sort((a, b) => b.starRating - a.starRating);
                    break;
            }

            displayHotels(filteredHotels);
        }

        function clearFilters() {
            // Reset all form inputs
            document.getElementById('priceRange').value = 500;
            updatePriceValue();
            
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            document.getElementById('sortBy').value = 'recommended';
            
            displayHotels(allHotels);
        }

        function updatePriceValue() {
            const value = document.getElementById('priceRange').value;
            document.getElementById('priceValue').textContent = `$${value}`;
        }

        // Booking functions
        function showBookingModal(hotelId) {
            if (!currentUser) {
                showAuthModal('login');
                showMessage('info', 'Please login to make a booking');
                return;
            }

            const hotel = allHotels.find(h => h.id === hotelId);
            if (!hotel || hotel.rooms.length === 0) {
                showMessage('error', 'No rooms available for booking');
                return;
            }

            const modal = document.getElementById('bookingModal');
            const content = document.getElementById('bookingContent');

            content.innerHTML = `
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-2">${hotel.name}</h3>
                    <p class="text-gray-600 dark:text-gray-400 flex items-center">
                        <i data-lucide="map-pin" class="w-4 h-4 mr-1"></i>
                        ${hotel.location}
                    </p>
                </div>

                <form id="bookingForm" class="space-y-4">
                    <input type="hidden" id="bookingHotelId" value="${hotel.id}">
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Check-in Date</label>
                            <input type="date" id="bookingCheckin" required class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-white">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Check-out Date</label>
                            <input type="date" id="bookingCheckout" required class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-white">
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Select Room</label>
                        <select id="bookingRoom" required class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-white">
                            <option value="">Choose a room...</option>
                            ${hotel.rooms.map(room => `
                                <option value="${room.id}" data-price="${room.pricePerNight}" data-guests="${room.maxGuests}">
                                    ${room.roomType} - Room ${room.roomNumber} ($${room.pricePerNight}/night, up to ${room.maxGuests} guests)
                                </option>
                            `).join('')}
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Number of Guests</label>
                        <select id="bookingGuests" required class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-white">
                            <option value="">Select guests...</option>
                            <option value="1">1 Guest</option>
                            <option value="2">2 Guests</option>
                            <option value="3">3 Guests</option>
                            <option value="4">4 Guests</option>
                            <option value="5">5+ Guests</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Special Requests (Optional)</label>
                        <textarea id="bookingRequests" rows="3" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-white" placeholder="Any special requirements..."></textarea>
                    </div>

                    <div id="bookingSummary" class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4 hidden">
                        <h4 class="font-semibold mb-2">Booking Summary</h4>
                        <div class="space-y-1 text-sm">
                            <div class="flex justify-between">
                                <span>Room:</span>
                                <span id="summaryRoom">-</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Dates:</span>
                                <span id="summaryDates">-</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Nights:</span>
                                <span id="summaryNights">-</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Guests:</span>
                                <span id="summaryGuests">-</span>
                            </div>
                            <hr class="my-2">
                            <div class="flex justify-between font-semibold text-lg">
                                <span>Total:</span>
                                <span id="summaryTotal">$0</span>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="w-full bg-primary-600 text-white py-3 rounded-lg hover:bg-primary-700 transition-colors font-semibold">
                        Confirm Booking
                    </button>
                </form>
            `;

            // Set default dates
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            document.getElementById('bookingCheckin').value = today.toISOString().split('T')[0];
            document.getElementById('bookingCheckout').value = tomorrow.toISOString().split('T')[0];

            // Add event listeners for real-time summary update
            ['bookingCheckin', 'bookingCheckout', 'bookingRoom', 'bookingGuests'].forEach(id => {
                document.getElementById(id).addEventListener('change', updateBookingSummary);
            });

            document.getElementById('bookingForm').addEventListener('submit', handleBooking);

            modal.classList.remove('hidden');
            lucide.createIcons();
        }

        function updateBookingSummary() {
            const checkin = document.getElementById('bookingCheckin').value;
            const checkout = document.getElementById('bookingCheckout').value;
            const roomSelect = document.getElementById('bookingRoom');
            const guests = document.getElementById('bookingGuests').value;
            const summary = document.getElementById('bookingSummary');

            if (!checkin || !checkout || !roomSelect.value || !guests) {
                summary.classList.add('hidden');
                return;
            }

            const roomOption = roomSelect.selectedOptions[0];
            const roomPrice = parseFloat(roomOption.dataset.price);
            const maxGuests = parseInt(roomOption.dataset.guests);
            const selectedGuests = parseInt(guests);

            if (selectedGuests > maxGuests) {
                showMessage('error', `Selected room can accommodate maximum ${maxGuests} guests`);
                return;
            }

            const checkinDate = new Date(checkin);
            const checkoutDate = new Date(checkout);
            const nights = Math.ceil((checkoutDate - checkinDate) / (1000 * 60 * 60 * 24));

            if (nights <= 0) {
                showMessage('error', 'Check-out date must be after check-in date');
                return;
            }

            const totalPrice = nights * roomPrice;

            document.getElementById('summaryRoom').textContent = roomOption.textContent.split(' ($')[0];
            document.getElementById('summaryDates').textContent = `${checkin} to ${checkout}`;
            document.getElementById('summaryNights').textContent = `${nights} night${nights !== 1 ? 's' : ''}`;
            document.getElementById('summaryGuests').textContent = `${guests} guest${guests !== '1' ? 's' : ''}`;
            document.getElementById('summaryTotal').textContent = `$${totalPrice.toFixed(2)}`;

            summary.classList.remove('hidden');
        }

        async function handleBooking(e) {
            e.preventDefault();

            const roomId = document.getElementById('bookingRoom').value;
            const startDate = document.getElementById('bookingCheckin').value;
            const endDate = document.getElementById('bookingCheckout').value;
            const guests = parseInt(document.getElementById('bookingGuests').value);
            const specialRequests = document.getElementById('bookingRequests').value;

            try {
                const response = await fetch(`${API_URL}/api/bookings`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${authToken}`
                    },
                    body: JSON.stringify({
                        roomId,
                        startDate,
                        endDate,
                        guests,
                        specialRequests
                    })
                });

                const data = await response.json();

                if (data.success) {
                    hideBookingModal();
                    showMessage('success', 'Booking confirmed successfully!');
                    showMessage('info', `Booking reference: ${data.data.booking.bookingReference}`);
                } else {
                    showMessage('error', data.message || 'Booking failed');
                }
            } catch (error) {
                showMessage('error', 'Connection error. Please try again.');
            }
        }

        function hideBookingModal() {
            document.getElementById('bookingModal').classList.add('hidden');
        }

        // Bookings view
        async function showBookings() {
            if (!currentUser) {
                showAuthModal('login');
                showMessage('info', 'Please login to view your bookings');
                return;
            }

            currentView = 'bookings';
            document.getElementById('heroSection').classList.add('hidden');
            document.getElementById('mainContent').classList.add('hidden');
            document.getElementById('bookingsView').classList.remove('hidden');

            try {
                const response = await fetch(`${API_URL}/api/bookings`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });

                const data = await response.json();

                if (data.success) {
                    displayBookings(data.data.bookings);
                } else {
                    throw new Error('Failed to load bookings');
                }
            } catch (error) {
                showMessage('error', 'Failed to load bookings');
                document.getElementById('bookingsList').innerHTML = `
                    <div class="text-center py-8 text-gray-500 dark:text-gray-400">
                        Failed to load bookings. Please try again.
                    </div>
                `;
            }
        }

        function displayBookings(bookings) {
            const container = document.getElementById('bookingsList');

            if (bookings.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-12">
                        <i data-lucide="calendar-x" class="w-16 h-16 mx-auto text-gray-400 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-600 dark:text-gray-400 mb-2">No bookings found</h3>
                        <p class="text-gray-500 dark:text-gray-500 mb-4">You haven't made any bookings yet.</p>
                        <button onclick="hideBookings()" class="px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors">
                            Browse Hotels
                        </button>
                    </div>
                `;
                lucide.createIcons();
                return;
            }

            container.innerHTML = bookings.map(booking => {
                const checkinDate = new Date(booking.startDate).toLocaleDateString();
                const checkoutDate = new Date(booking.endDate).toLocaleDateString();
                const statusColor = booking.status === 'confirmed' ? 'green' : booking.status === 'cancelled' ? 'red' : 'yellow';

                return `
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
                        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-4">
                            <div>
                                <h3 class="text-xl font-semibold mb-1">${booking.hotel.name}</h3>
                                <p class="text-gray-600 dark:text-gray-400 flex items-center">
                                    <i data-lucide="map-pin" class="w-4 h-4 mr-1"></i>
                                    ${booking.hotel.location}
                                </p>
                            </div>
                            <span class="px-3 py-1 bg-${statusColor}-100 dark:bg-${statusColor}-900/30 text-${statusColor}-800 dark:text-${statusColor}-300 rounded-full text-sm font-medium">
                                ${booking.status.charAt(0).toUpperCase() + booking.status.slice(1)}
                            </span>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                            <div>
                                <p class="text-sm text-gray-600 dark:text-gray-400">Room</p>
                                <p class="font-medium">${booking.room.roomType} - Room ${booking.room.roomNumber}</p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-600 dark:text-gray-400">Dates</p>
                                <p class="font-medium">${checkinDate} - ${checkoutDate}</p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-600 dark:text-gray-400">Guests</p>
                                <p class="font-medium">${booking.guests} guest${booking.guests !== 1 ? 's' : ''}</p>
                            </div>
                        </div>

                        <div class="flex justify-between items-center pt-4 border-t dark:border-gray-700">
                            <div>
                                <p class="text-sm text-gray-600 dark:text-gray-400">Booking Reference</p>
                                <p class="font-mono text-sm">${booking.bookingReference}</p>
                            </div>
                            <div class="text-right">
                                <p class="text-sm text-gray-600 dark:text-gray-400">Total Amount</p>
                                <p class="text-xl font-bold text-primary-600 dark:text-primary-400">$${parseFloat(booking.totalPrice).toFixed(2)}</p>
                            </div>
                        </div>

                        ${booking.specialRequests ? `
                            <div class="mt-4 pt-4 border-t dark:border-gray-700">
                                <p class="text-sm text-gray-600 dark:text-gray-400">Special Requests</p>
                                <p class="text-sm">${booking.specialRequests}</p>
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');

            lucide.createIcons();
        }

        function hideBookings() {
            currentView = 'home';
            document.getElementById('bookingsView').classList.add('hidden');
            document.getElementById('heroSection').classList.remove('hidden');
            document.getElementById('mainContent').classList.remove('hidden');
        }

        function showHome() {
            if (currentView === 'bookings') {
                hideBookings();
            }
        }

        // Utility functions
        function showLoading(show) {
            const spinner = document.getElementById('loadingSpinner');
            const grid = document.getElementById('hotelGrid');
            
            if (show) {
                spinner.classList.remove('hidden');
                grid.classList.add('hidden');
            } else {
                spinner.classList.add('hidden');
                grid.classList.remove('hidden');
            }
        }

        function showNoResults() {
            document.getElementById('noResults').classList.remove('hidden');
            document.getElementById('hotelGrid').classList.add('hidden');
        }

        function hideNoResults() {
            document.getElementById('noResults').classList.add('hidden');
            document.getElementById('hotelGrid').classList.remove('hidden');
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            menu.classList.toggle('hidden');
        }

        function toggleDarkMode() {
            document.documentElement.classList.toggle('dark');
            localStorage.setItem('darkMode', document.documentElement.classList.contains('dark'));
        }

        function showMessage(type, message) {
            const container = document.getElementById('messageContainer');
            const id = Date.now();
            
            const colors = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                info: 'bg-blue-500',
                warning: 'bg-yellow-500'
            };

            const messageEl = document.createElement('div');
            messageEl.id = `message-${id}`;
            messageEl.className = `${colors[type]} text-white px-4 py-3 rounded-lg shadow-lg transform transition-all duration-300 translate-x-full`;
            messageEl.innerHTML = `
                <div class="flex items-center justify-between">
                    <span>${message}</span>
                    <button onclick="removeMessage(${id})" class="ml-4 text-white/80 hover:text-white">
                        <i data-lucide="x" class="w-4 h-4"></i>
                    </button>
                </div>
            `;

            container.appendChild(messageEl);
            lucide.createIcons();

            // Animate in
            setTimeout(() => {
                messageEl.classList.remove('translate-x-full');
            }, 100);

            // Auto remove after 5 seconds
            setTimeout(() => {
                removeMessage(id);
            }, 5000);
        }

        function removeMessage(id) {
            const messageEl = document.getElementById(`message-${id}`);
            if (messageEl) {
                messageEl.classList.add('translate-x-full');
                setTimeout(() => {
                    messageEl.remove();
                }, 300);
            }
        }

        // Load dark mode preference
        if (localStorage.getItem('darkMode') === 'true') {
            document.documentElement.classList.add('dark');
        }
    </script>
</body>
</html>